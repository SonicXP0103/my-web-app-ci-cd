- name: 設定部署內容
  env:
    GAME_VERSION_TYPE: "測試版"
    MY_GAME_API_KEY: ${{ secrets.API_KEY_GAME_SERVER }}
  run: |
    echo "🔧 建立部署頁面內容..."
    cat <<EOF > index.html
    <!DOCTYPE html>
    <html lang="zh-Hant">
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>魔法森林大冒險 - ${GAME_VERSION_TYPE}</title>
      <style>
        body {
          font-family: Arial, sans-serif;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          min-height: 100vh;
          background-color: #e0f7fa;
          color: #004d40;
          margin: 0;
        }
        h1 {
          color: #00796b;
        }
      </style>
    </head>
    <body>
      <h1>歡迎來到魔法森林大冒險！</h1>
      <p>這是遊戲的${GAME_VERSION_TYPE}版本。</p>
      <p id="version-time">部署時間載入中...</p>

      <script>
        // ✅ 將敏感資訊存在 script 中，模擬只有 JS 可存取
        const apiKey = "${MY_GAME_API_KEY}";
        console.log("🔐 開發用 API Key（只在 console 可見）:", apiKey);

        // ✅ 顯示部署時間
        const el = document.getElementById("version-time");
        el.innerText = "部署時間：" + new Date().toLocaleString();
      </script>
    </body>
    </html>
    EOF
